
    <html>
    <head>
        <title>Picam</title>
        <style>
            body { font-family: sans-serif; margin: 0; padding: 1em; background-color: #f4f4f4; }
            h1 { text-align: center; }
            .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 1em; }
            .stream-box { border: 1px solid #ccc; padding: 0.5em; background-color: white; }
            .stream-box h2 { margin: 0 0 0.5em 0; text-align: center; font-size: 1em; }
            .stream-box img { max-width: 100%; display: block; }
            #aruco-info { margin-top: 1em; }
            #aruco-info pre { background-color: #eee; border: 1px solid #ddd; padding: 1em; white-space: pre-wrap; word-wrap: break-word; }
        </style>
    </head>
    <body>
        <h1>Raspberry Pi - Multi-stream</h1>
        <h2 id="filename-display" style="text-align: center; font-size: 1em; margin-top: 0;">En attente du nom de fichier...</h2>
        <div class="container">
            <div class="stream-box">
                <h2>Caméra Originale</h2>
                <img src="/stream/original_img">
                <p style="text-align: center; font-size: 0.8em; margin: 0.5em 0 0 0;">original_img</p>
            </div>
            <div class="stream-box">
                <h2>Image Détordue</h2>
                <img src="/stream/undistorted_img">
                <p style="text-align: center; font-size: 0.8em; margin: 0.5em 0 0 0;">undistorted_img</p>
            </div>
            <div class="stream-box">
                <h2>Image Redressée</h2>
                <img src="/stream/warped_img">
                <p style="text-align: center; font-size: 0.8em; margin: 0.5em 0 0 0;">warped_img</p>
            </div>
        </div>
        <div id="aruco-info">
            <h2>Tags ArUco Détectés</h2>
            <pre id="aruco-data-display">En attente de données...</pre>
        </div>
        <script>
            function fetchArucoData() {
                fetch('/aruco_data')
                    .then(response => response.json())
                    .then(data => {
                        const display = document.getElementById('aruco-data-display');
                        if (data && data.length > 0) {
                            display.textContent = JSON.stringify(data, null, 2);
                        } else {
                            display.textContent = 'Aucun tag ArUco détecté.';
                        }
                    })
                    .catch(error => {
                        console.error('Erreur lors de la récupération des données ArUco:', error);
                        document.getElementById('aruco-data-display').textContent = 'Erreur de chargement.';
                    });
            }

            function fetchFilename() {
                fetch('/filename')
                    .then(response => response.json())
                    .then(data => {
                        const display = document.getElementById('filename-display');
                        if (data && data.filename) {
                            display.textContent = data.filename;
                        } else {
                            display.textContent = 'Nom de fichier non disponible.';
                        }
                    })
                    .catch(error => {
                        console.error('Erreur lors de la récupération du nom de fichier:', error);
                        document.getElementById('filename-display').textContent = 'Erreur de chargement du nom de fichier.';
                    });
            }

            // Récupérer les données 24 fois par secondes
            setInterval(fetchArucoData, 40);
            setInterval(fetchFilename, 40);

            // Premier appel au chargement de la page
            fetchArucoData();
            fetchFilename();
        </script>
    </body>
    </html>
    